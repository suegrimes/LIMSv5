<h5>New item</h5>

<%= form_tag url_for(:action => :populate_items), {id: 'default_items', remote: true} do %>
  <div class="card">
  <h6 class="card-header">Order Items:</h6>
  <div class="card-body">

    <div class="form-group row">
      <label for="item_default_requester_name" class="col-auto col-form-label col-form-label-sm">Requester:</label>
      <div class="col-auto">
        <%=select(:item_default, :requester_name, @researchers, {:include_blank => 'Select requestor'}, class: "form-control") %>
      </div>

      <label for="dt_entered" class="col-sm-2 col-form-label col-form-label-sm">Date Entered:</label>
      <div id="dt_entered" class="col-auto">
        <%= format_datetime(Time.now) %>
      </div>
    </div>

    <div class="form-group row">
      <label for="item_default_deliver_site" class="col-auto col-form-label col-form-label-sm">Deliver Site:</label>
      <div class="col-auto">
        <%=select(:item_default, :deliver_site, Item::DELIVER_SITES, {:include_blank => true}, class: "form-control") %>
      </div>

      <label for="item_default_grant_nr" class="col-sm-2 col-form-label col-form-label-sm">Grant#:</label>
      <div id="dt_entered" class="col-auto">
        <%=collection_select(:item_default, :grant_nr, @grant_nrs, :c_value, :c_value, {:include_blank => 'Select..'}, class: "form-control") %>
      </div>
    </div>
  </div>
  </div>
 
  <div id="item_error" style="display:none; color:red"></div>

  <div id='add_items' class="form-group row">
    <span class="col-sm-6"><b>Number of different items to order?</b>&nbsp;
    <%= text_field_tag(:nr_libs, @nr_libs, {class: "col-sm-1 form-control"})-%></span>
    <%= submit_tag('Add Items', id: 'add_button', class: "btn btn-primary") %>
  </div>
<% end %>

<%= form_tag url_for(:action => :create) do %>
  <!--%= render '/shared/errors', model: @items %-->
   <div id='multi_items'>
    <% if @items %><%= render 'multi_item_form' %><% end %>
  </div>
<% end %>
