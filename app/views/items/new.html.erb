<h5>New order items(s)</h5>

<%= form_tag url_for(:action => :populate_items), {id: 'default_items', remote: true} do %>
  <div class="card">
  <h6 class="card-header">Items for:</h6>
  <div class="card-body">

    <div class="form-group row">
      <label for="item_default_requester_name" class="col-auto col-form-label col-form-label-sm">Requester:</label>
      <div class="col-auto">
        <%=select(:item_default, :requester_name, @researchers, {:include_blank => 'Select requestor'}, class: "form-control") %>
      </div>
    </div>

    <div class="form-group row">
      <label for="item_default_deliver_site" class="col-auto col-form-label col-form-label-sm">Deliver Site:</label>
      <div class="col-auto">
        <%=select(:item_default, :deliver_site, Item::DELIVER_SITES, {:include_blank => true}, class: "form-control") %>
      </div>

      <label for="item_default_grant_nr" class="col-sm-2 col-form-label col-form-label-sm">Grant#:</label>
      <div id="dt_entered" class="col-auto">
        <%=collection_select(:item_default, :grant_nr, @grant_nrs, :c_value, :c_value, {:include_blank => 'Select..'}, class: "form-control") %>
      </div>
    </div>
  </div>
  </div>
 
  <div id="item_error" style="display:none; color:red"></div>

  <br/>
  <div id='add_items' class="row">
    <div class="offset-sm-1 col-sm-3 justify-content-center"><b>Number of item rows?</b>
    <%= text_field_tag(:nr_items, '', {class: "form-control offset-sm-2 col-sm-2"})-%></div>
    <%= submit_tag('Add item rows', id: 'add_button', class: "btn btn-primary align-self-center") %>
  </div>
  <br/>
<% end %>

<%= form_tag url_for(:action => :create) do %>
  <!--%= render '/shared/errors', model: @items %-->
   <div id='multi_items'>
    <% if @items %><%= render 'multi_item_form' %><% end %>
  </div>
<% end %>
